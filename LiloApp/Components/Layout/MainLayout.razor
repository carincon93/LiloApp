@inherits LayoutComponentBase

@inject LiloApp.Services.NavigatorService NavigatorService
@inject NavigationManager NavigationManager

@code {
    protected override void OnInitialized()
    {
        NavigatorService.NavigationManager = NavigationManager;
        NavigatorService.OnPageChanged += UpdateState;

        base.OnInitialized();
    }

    private void UpdateState()
    {
        InvokeAsync(() => StateHasChanged());
    }

    public void Dispose()
    {
        NavigatorService.OnPageChanged -= UpdateState;
    }
}

<div>
    <div class="bg-cover bg-no-repeat h-full min-h-[100vh] bg-fixed @(NavigatorService.CurrentPage == "DreamsBoardListPage" || NavigatorService.CurrentPage == "DreamPage" ? "bg-[url('/images/dreamboard_screen.webp')]" : "bg-[url('/images/background.webp')]") fixed inset-0 w-full h-full z-[-1]"></div>
    <div>
        <NavMenu />
    </div>

    <main class="px-6">
         <div>
            <div class="blur-popup-wrapper fixed inset-0 backdrop-blur-sm bg-white/30 z-10 w-full h-full"></div>

            @Body
        </div>
    </main>
</div>

